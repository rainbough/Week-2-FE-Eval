
<html>
<head>
  <link rel="stylesheet" href="style.css"/>
  <title>Week 2 Frontend Project: SciFi Library!</title>
</head>
<body>

<h1>the scifi library</h1>
<div class="inputstuff">
<h4>Title:<input id="title"/>
Author: <input id="author" />
<button type="button" class="button">Add New book</button></h4>
</input>
<div id="templates">
<script class="library" type="text/template">
<div class="library">
    <h3> <%= title %></h3>
    <h5> <%= author %></h5>
    <p> Status: <%= status %></p>
  </div>
</script>
</div>

<div id="library"></div>


<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.4.4/underscore-min.js"></script>
<script type="text/javascript">
  var libraryTemplateHtml = $('#templates .library').html();
  var libraryTemplate = _.template(libraryTemplateHtml);

 // {
 //      title: 'I, Robot',
 //      author: 'Issac Asimov',
 //      status: 'available'
 //    },
 //    {
 //      title: 'The Moon is a Harsh Mistress',
 //      author: 'Robert Heinlein',
 //      status: 'available'
 //    },
 //    {
 //      title: 'Starship Troopers',
 //      author: 'Robert A. Heinlein',
 //      status: 'available'
 //    },
 //    {
 //      title: 'Do Androids Dream of Electric Sheep?',
 //      author: 'Philip K. Dick',
 //      status: 'available'
 //    },
 //    {
 //      title: "Diamond Age",
 //      author: "Neal Stephenson",
 //      status: 'available'
 //    }  



var Library = function(){
  this.books = [];
  var array = this.books;
  var pushbooks = function (newbook){
    array.push(newbook);
  };
  this.addBook = function(newBook){
      newbook = {
        title: newBook.title,
        author: newBook.author,
        status: 'available'
      };
      pushbooks(newbook);
      var title = newBook.title;
      
  };


  this.getBook = function(bookName){
    for(var i = 0; i < this.books.length; i += 1){
      if (bookName === this.books[i].title){
        var bookStatus = this.books.status;
        return bookStatus;
      }
      else {
        return "This book is not available";
      }
    }
  };
  this.render = function () {
  for (var i = 0; i < this.books.length; i += 1) {
    var newBookHtml = libraryTemplate(this.books[i]);
    $('#library').append(newBookHtml);
    }
  };
};
// var renderLibrary = function (array) {
//   for (var i = 0; i < array.length; i += 1) {
//     var newBookHtml = libraryTemplate(array[i]);
//     $('#library').append(newBookHtml);
//   }
// };
//renderLibrary(books);

$('.button').on('click', function () {

  var newTitle = $('#title').val();
  var newAuthor = $('#author').val();
  var newBook = {
    title: newTitle,
    author: newAuthor,
    status: 'available'
  };
  var newLib = new Library();
  newLib.addBook(newBook);
  newLib.render();
  // var newBookHtml = libraryTemplate(newBook);
  // $('#library').append(newBookHtml);
});
var lib = new Library();
console.log('New library:', lib);

lib.addBook({
  title: 'Test Title 1',
  author: 'Author 1'
});
console.log('# of books should be 1:', lib.books.length);

lib.addBook({
  title: 'Test Title 2',
  author: 'Author 2'
});
console.log('# of books should be 2:', lib.books.length);
var book = lib.getBook('Test Title 1');
//console.log('The book should exist:', book);
//console.log('Book status should be available:', book.status);



// This should render all the library's books to the web page
lib.render();




</script>


<small>"It's back."</small>

</body>
</html>
